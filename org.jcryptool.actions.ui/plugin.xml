<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="false"
            category="org.jcryptool.crypto"
            class="org.jcryptool.actions.ui.views.ActionView"
            icon="icons/icon.gif"
            id="org.jcryptool.actions.views.ActionView"
            name="%view.name">
      </view>
   </extension>
   <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="$nl$/contexts.xml">
      </contexts>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="org.jcryptool.actions.ui.recordCategory"
            name="%record.category">
      </category>
      <category
            id="org.jcryptool.actions.ui.runCategory"
            name="%run.category">
      </category>
      <category
            id="org.jcryptool.actions.ui.removeCategory"
            name="%remove.category">
      </category>
      <category
            id="org.jcryptool.actions.ui.manageCategory"
            name="%manage.category">
      </category>
      <command
            categoryId="org.jcryptool.actions.ui.recordCategory"
            description="%record.description"
            id="org.jcryptool.actions.recordCommand"
            name="%record.name">
            <state class="org.eclipse.jface.commands.ToggleState"
                id="org.jcryptool.actions.recordCommand.toggleState" />
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.recordCategory"
            description="%new.description"
            id="org.jcryptool.actions.NewCommand"
            name="%new.name">
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.runCategory"
            description="%start.description"
            id="org.jcryptool.actions.startCommand"
            name="%start.name">
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.removeCategory"
            description="%remove.description"
            id="org.jcryptool.actions.removeSelectedCommand"
            name="%remove.name">
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.manageCategory"
            description="%import.description"
            id="org.jcryptool.actions.importCommand"
            name="%import.name">
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.manageCategory"
            description="%export.description"
            id="org.jcryptool.actions.exportCommand"
            name="%export.name">
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.manageCategory"
            description="%moveUp.description"
            id="org.jcryptool.actions.moveUpCommand"
            name="%moveUp.name">
      </command>
      <command
            categoryId="org.jcryptool.actions.ui.manageCategory"
            description="%moveDown.description"
            id="org.jcryptool.actions.moveDownCommand"
            name="%moveDown.name">
      </command>
      <command
            description="%command.description"
            id="org.jcryptool.action.importActionCascadeCommand"
            name="%command.name">
      </command>
      <command
            description="%importsample.description"
            id="org.jcryptool.actions.ImportSampleCommand"
            name="%importsample.name">
            <commandParameter name="cascadeFilename" optional="false"
                  id="cascadeFilename">
            </commandParameter>
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:org.jcryptool.actions.views.ActionView">
         <command
               commandId="org.jcryptool.actions.NewCommand"
               icon="icons/new.gif"
               style="push"
               tooltip="%create.tooltip">
         </command>
         <command
               commandId="org.jcryptool.actions.recordCommand"
               disabledIcon="icons/record_inactive.gif"
               icon="icons/record_active.gif"
               style="toggle"
               tooltip="%record.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.menuSeparator1"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.startCommand"
               disabledIcon="icons/start_inactive.gif"
               icon="icons/start_active.gif"
               style="push"
               tooltip="%start.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.menuSeparator2"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.removeSelectedCommand"
               disabledIcon="icons/remove_inactive.gif"
               icon="icons/remove_active.gif"
               style="push"
               tooltip="%remove.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.menuSeparator3"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.importCommand"
               disabledIcon="icons/import_inactive.gif"
               icon="icons/import_active.gif"
               style="push"
               tooltip="%import.tooltip">
         </command>
         <command
               commandId="org.jcryptool.actions.exportCommand"
               disabledIcon="icons/export_inactive.gif"
               icon="icons/export_active.gif"
               style="push"
               tooltip="%export.tooltip">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.jcryptool.actions.popup">
         <command
               commandId="org.jcryptool.actions.removeSelectedCommand"
               disabledIcon="icons/remove_inactive.gif"
               icon="icons/remove_active.gif"
               style="push"
               tooltip="%remove.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.popupSeparator3"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.moveUpCommand"
               icon="icons/moveUp.gif"
               label="%moveUp.name"
               style="push"
               tooltip="%moveUp.tooltip">
         </command>
         <command
               commandId="org.jcryptool.actions.moveDownCommand"
               icon="icons/moveDown.gif"
               label="%moveDown.name"
               style="push"
               tooltip="%moveUp.tooltip">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="toolbar:org.jcryptool.actions.views.ActionView">
         <command
               commandId="org.jcryptool.actions.NewCommand"
               icon="icons/new.gif"
               style="push"
               tooltip="%create.tooltip">
         </command>
         <command
               commandId="org.jcryptool.actions.recordCommand"
               disabledIcon="icons/record_inactive.gif"
               icon="icons/record_active.gif"
               style="toggle"
               tooltip="%record.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.toolbarSeparator1"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.startCommand"
               disabledIcon="icons/start_inactive.gif"
               icon="icons/start_active.gif"
               style="push"
               tooltip="%start.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.toolbarSeparator2"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.removeSelectedCommand"
               disabledIcon="icons/remove_inactive.gif"
               icon="icons/remove_active.gif"
               style="push"
               tooltip="%remove.tooltip">
         </command>
         <separator
               name="org.jcryptool.actions.ui.toolbarSeparator3"
               visible="true">
         </separator>
         <command
               commandId="org.jcryptool.actions.importCommand"
               disabledIcon="icons/import_inactive.gif"
               icon="icons/import_active.gif"
               style="push"
               tooltip="%import.tooltip">
         </command>
         <command
               commandId="org.jcryptool.actions.exportCommand"
               disabledIcon="icons/export_inactive.gif"
               icon="icons/export_active.gif"
               style="push"
               tooltip="%export.tooltip">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.jcryptool.fileexplorer.popup">
         <command
               commandId="org.jcryptool.action.importActionCascadeCommand"
               id="org.jcryptool.fileexplorer.actions.importCascade"
               label="%command.label"
               style="push"
               tooltip="%command.tooltip">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.jcryptool.actions.ui.handler.RemoveSelectedHandler"
            commandId="org.jcryptool.actions.removeSelectedCommand">
         <activeWhen>
            <and>
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="or">
                     <instanceof
                           value="org.jcryptool.actions.core.types.ActionItem">
                     </instanceof>
                  </iterate>
               </with>
               <with
                     variable="activePartId">
                  <equals
                        value="org.jcryptool.actions.views.ActionView">
                  </equals>
               </with>
               <with variable="activeWorkbenchWindow">
	               <not>
	                 <test
	                      args="org.jcryptool.actions.recordCommand"
	                      forcePluginActivation="true"
	                      property="org.jcryptool.actions.isDoRecord"
	                      value="true"/>
	               </not>
	            </with>
            </and>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.StartHandler"
            commandId="org.jcryptool.actions.startCommand">
         <activeWhen>
	         <and>
	            <with
	                  variable="selection">
	               <iterate
	                   ifEmpty="false"
	                   operator="or">
	                     <instanceof
	                           value="org.jcryptool.actions.core.types.ActionItem">
	                     </instanceof>
	               </iterate>
	            </with>
	            <with
                  variable="activeEditor">
                  <instanceof
                     value="org.eclipse.ui.part.EditorPart">
                  </instanceof>
                </with>
	            <with variable="activeWorkbenchWindow">
	               <not>
	                 <test
	                      args="org.jcryptool.actions.recordCommand"
	                      forcePluginActivation="true"
	                      property="org.jcryptool.actions.isDoRecord"
	                      value="true"/>
	               </not>
	            </with>
	         </and>
         </activeWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.RecordHandler"
            commandId="org.jcryptool.actions.recordCommand">
         <activeWhen>
            <with
                  variable="activeEditor">
               <instanceof
                     value="org.eclipse.ui.part.EditorPart">
               </instanceof>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.NewCascadeHandler"
            commandId="org.jcryptool.actions.NewCommand">
         <activeWhen>
            <and>
               <with
                     variable="activePartId">
                  <equals
                        value="org.jcryptool.actions.views.ActionView">
                  </equals>
               </with>
               <with variable="activeWorkbenchWindow">
	               <not>
	                 <test
	                      args="org.jcryptool.actions.recordCommand"
	                      forcePluginActivation="true"
	                      property="org.jcryptool.actions.isDoRecord"
	                      value="true"/>
	               </not>
	            </with>
	         </and>
         </activeWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.ImportHandler"
            commandId="org.jcryptool.actions.importCommand">
         <activeWhen>
            <with variable="activeWorkbenchWindow">
               <not>
                 <test
                      args="org.jcryptool.actions.recordCommand"
                      forcePluginActivation="true"
                      property="org.jcryptool.actions.isDoRecord"
                      value="true"/>
               </not>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.ExportHandler"
            commandId="org.jcryptool.actions.exportCommand">
         <activeWhen>
           <with variable="activeWorkbenchWindow">
               <not>
                 <test
                      args="org.jcryptool.actions.recordCommand"
                      forcePluginActivation="true"
                      property="org.jcryptool.actions.isDoRecord"
                      value="true"/>
               </not>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.MoveUpHandler"
            commandId="org.jcryptool.actions.moveUpCommand">
         <activeWhen>
            <and>
               <with
                     variable="activePartId">
                  <equals
                        value="org.jcryptool.actions.views.ActionView">
                  </equals>
               </with>
               <with variable="activeWorkbenchWindow">
	               <not>
	                 <test
	                      args="org.jcryptool.actions.recordCommand"
	                      forcePluginActivation="true"
	                      property="org.jcryptool.actions.isDoRecord"
	                      value="true"/>
	               </not>
	            </with>
	          </and>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.MoveDownHandler"
            commandId="org.jcryptool.actions.moveDownCommand">
         <activeWhen>
            <and>
               <with
                     variable="activePartId">
                  <equals
                        value="org.jcryptool.actions.views.ActionView">
                  </equals>
               </with>
               <with variable="activeWorkbenchWindow">
	               <not>
	                 <test
	                      args="org.jcryptool.actions.recordCommand"
	                      forcePluginActivation="true"
	                      property="org.jcryptool.actions.isDoRecord"
	                      value="true"/>
	               </not>
	            </with>
	         </and>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.ImportActionCascadeHandler"
            commandId="org.jcryptool.action.importActionCascadeCommand">
         <activeWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <adapt
                        type="org.eclipse.core.filesystem.IFileStore">
                  </adapt>
                  <test
                        property="org.jcryptool.fileexplorer.isCascade"
                        value=".xml">
                  </test>
               </iterate>
            </with>
            </activeWhen>
      </handler>
      <handler
            class="org.jcryptool.actions.ui.handler.ImportSampleHandler"
            commandId="org.jcryptool.actions.ImportSampleCommand">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.jcryptool.preferences.general"
            class="org.jcryptool.actions.ui.preferences.GeneralPage"
            id="org.jcryptool.actions.ui.general"
            name="%page.name">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="org.jcryptool.actions.ui.preferences.PreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
         id="org.jcryptool.actions.propertytester.recordPropertyTester"
         class="org.jcryptool.actions.ui.propertytester.RecordPropertyTester"
         type="org.eclipse.ui.services.IServiceLocator"
         namespace="org.jcryptool.actions"
         properties="isDoRecord">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.help.toc">
      <toc
            file="$nl$/toc.xml"
            primary="false">
      </toc>
      <toc
            file="$nl$/toc_dev.xml"
            primary="false">
      </toc>
   </extension>
   <extension
         point="org.eclipse.help.index">
      <index
            file="$nl$/index.xml">
      </index>
   </extension>

</plugin>
